-- phpMyAdmin SQL Dump
-- version 5.2.2
-- https://www.phpmyadmin.net/
--
-- Host: localhost:3306
-- Generation Time: Oct 01, 2025 at 08:19 PM
-- Server version: 10.11.6-MariaDB-cll-lve
-- PHP Version: 8.4.11

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Database: `sooa7192_SIA`
--

-- --------------------------------------------------------

--
-- Table structure for table `CUSTOMER`
--

CREATE TABLE `CUSTOMER` (
  `NIK_CUSTOMER` varchar(10) NOT NULL,
  `NAMA_CUSTOMER` varchar(100) NOT NULL,
  `EMAIL` varchar(150) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;

--
-- Triggers `CUSTOMER`
--
DELIMITER $$
CREATE TRIGGER `trg_before_insert_customer` BEFORE INSERT ON `CUSTOMER` FOR EACH ROW BEGIN
  IF NEW.NIK_CUSTOMER IS NULL OR NEW.NIK_CUSTOMER = '' THEN
    SET NEW.NIK_CUSTOMER = CONCAT('CUS', LPAD(HEX(FLOOR(RAND()*16777215)), 7, '0'));
  END IF;
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `trg_cus_before_insert` BEFORE INSERT ON `CUSTOMER` FOR EACH ROW BEGIN
  IF NEW.NIK_CUSTOMER IS NULL OR NEW.NIK_CUSTOMER = '' THEN
    SET NEW.NIK_CUSTOMER = CONCAT('CUS', LPAD(HEX(FLOOR(RAND()*0xFFFFFF)), 7, '0'));
  END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `DETAIL_NOTA_JUAL`
--

CREATE TABLE `DETAIL_NOTA_JUAL` (
  `ID_DETAIL_NOTA_JUAL` varchar(10) NOT NULL,
  `NOMOR_NOTA` varchar(10) NOT NULL,
  `KODE_BARANG` varchar(10) NOT NULL,
  `JUMLAH_BARANG` decimal(5,0) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;

--
-- Triggers `DETAIL_NOTA_JUAL`
--
DELIMITER $$
CREATE TRIGGER `trg_before_insert_detail_nota` BEFORE INSERT ON `DETAIL_NOTA_JUAL` FOR EACH ROW BEGIN
  IF NEW.ID_DETAIL_NOTA_JUAL IS NULL OR NEW.ID_DETAIL_NOTA_JUAL = '' THEN
    SET NEW.ID_DETAIL_NOTA_JUAL = CONCAT('DTL', LPAD(HEX(FLOOR(RAND()*16777215)), 7, '0'));
  END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `JURNAL_DETAIL`
--

CREATE TABLE `JURNAL_DETAIL` (
  `ID_DETAIL` varchar(10) NOT NULL,
  `ID_JURNAL_UMUM` varchar(10) NOT NULL,
  `KODE_AKUN` int(11) NOT NULL,
  `POSISI` enum('D','K') NOT NULL,
  `NILAI` decimal(18,2) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;

--
-- Triggers `JURNAL_DETAIL`
--
DELIMITER $$
CREATE TRIGGER `trg_before_insert_jurnal_detail` BEFORE INSERT ON `JURNAL_DETAIL` FOR EACH ROW BEGIN
  IF NEW.ID_DETAIL IS NULL OR NEW.ID_DETAIL = '' THEN
    SET NEW.ID_DETAIL = CONCAT('JDT', LPAD(HEX(FLOOR(RAND()*16777215)), 7, '0'));
  END IF;
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `trg_jdt_before_insert` BEFORE INSERT ON `JURNAL_DETAIL` FOR EACH ROW BEGIN
  IF NEW.ID_DETAIL IS NULL OR NEW.ID_DETAIL = '' THEN
    SET NEW.ID_DETAIL = CONCAT('JDT', LPAD(HEX(FLOOR(RAND()*0xFFFFFF)), 7, '0'));
  END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `JURNAL_UMUM`
--

CREATE TABLE `JURNAL_UMUM` (
  `ID_JURNAL_UMUM` varchar(10) NOT NULL,
  `TANGGAL` date NOT NULL,
  `REF` varchar(50) DEFAULT NULL,
  `KETERANGAN` varchar(255) DEFAULT NULL,
  `CREATED_AT` timestamp NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;

--
-- Triggers `JURNAL_UMUM`
--
DELIMITER $$
CREATE TRIGGER `trg_before_insert_jurnal_umum` BEFORE INSERT ON `JURNAL_UMUM` FOR EACH ROW BEGIN
  IF NEW.ID_JURNAL_UMUM IS NULL OR NEW.ID_JURNAL_UMUM = '' THEN
    SET NEW.ID_JURNAL_UMUM = CONCAT('JUR', LPAD(HEX(FLOOR(RAND()*16777215)), 7, '0'));
  END IF;
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `trg_jur_before_insert` BEFORE INSERT ON `JURNAL_UMUM` FOR EACH ROW BEGIN
  IF NEW.ID_JURNAL_UMUM IS NULL OR NEW.ID_JURNAL_UMUM = '' THEN
    SET NEW.ID_JURNAL_UMUM = CONCAT('JUR', LPAD(HEX(FLOOR(RAND()*0xFFFFFF)), 7, '0'));
  END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `KARYAWAN`
--

CREATE TABLE `KARYAWAN` (
  `NIK_KARYAWAN` varchar(10) NOT NULL,
  `NAMA_KARYAWAN` varchar(100) NOT NULL,
  `EMAIL` varchar(150) NOT NULL,
  `PASSWORD` varchar(24) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;

--
-- Triggers `KARYAWAN`
--
DELIMITER $$
CREATE TRIGGER `trg_before_insert_karyawan` BEFORE INSERT ON `KARYAWAN` FOR EACH ROW BEGIN
  IF NEW.NIK_KARYAWAN IS NULL OR NEW.NIK_KARYAWAN = '' THEN
    SET NEW.NIK_KARYAWAN = CONCAT('KRY', LPAD(HEX(FLOOR(RAND()*16777215)), 7, '0'));
  END IF;
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `trg_kry_before_insert` BEFORE INSERT ON `KARYAWAN` FOR EACH ROW BEGIN
  IF NEW.NIK_KARYAWAN IS NULL OR NEW.NIK_KARYAWAN = '' THEN
    SET NEW.NIK_KARYAWAN = CONCAT('KRY', LPAD(HEX(FLOOR(RAND()*0xFFFFFF)), 7, '0'));
  END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `KODE_AKUN`
--

CREATE TABLE `KODE_AKUN` (
  `KODE_AKUN` int(11) NOT NULL,
  `NAMA_AKUN` varchar(100) NOT NULL,
  `TIPE` enum('ASET','KEWAJIBAN','EKUITAS','PENDAPATAN','BEBAN') NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;

--
-- Dumping data for table `KODE_AKUN`
--

INSERT INTO `KODE_AKUN` (`KODE_AKUN`, `NAMA_AKUN`, `TIPE`) VALUES
(1001, 'Kas', 'ASET'),
(1101, 'Piutang Usaha', 'ASET'),
(2001, 'Utang Usaha', 'KEWAJIBAN'),
(3001, 'Modal Pemilik', 'EKUITAS'),
(4001, 'Pendapatan Penjualan', 'PENDAPATAN'),
(4002, 'Pendapatan Membership', 'PENDAPATAN'),
(5001, 'Beban Operasional', 'BEBAN');

-- --------------------------------------------------------

--
-- Table structure for table `MASTER_MEMBERSHIP`
--

CREATE TABLE `MASTER_MEMBERSHIP` (
  `ID_MASTER_MEMBERSHIP` varchar(10) NOT NULL,
  `NIK_CUSTOMER` varchar(10) DEFAULT NULL,
  `NAMA_MEMBERSHIP` varchar(50) NOT NULL,
  `HARGA_MEMBERSHIP` decimal(25,0) NOT NULL,
  `POTONGAN` decimal(2,0) NOT NULL,
  `STATUS` decimal(1,0) NOT NULL,
  `LAST_UPDATED` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;

--
-- Triggers `MASTER_MEMBERSHIP`
--
DELIMITER $$
CREATE TRIGGER `trg_before_insert_membership` BEFORE INSERT ON `MASTER_MEMBERSHIP` FOR EACH ROW BEGIN
  IF NEW.ID_MASTER_MEMBERSHIP IS NULL OR NEW.ID_MASTER_MEMBERSHIP = '' THEN
    SET NEW.ID_MASTER_MEMBERSHIP = CONCAT('MBR', LPAD(HEX(FLOOR(RAND()*16777215)), 7, '0'));
  END IF;
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `trg_mmb_before_insert` BEFORE INSERT ON `MASTER_MEMBERSHIP` FOR EACH ROW BEGIN
  IF NEW.ID_MASTER_MEMBERSHIP IS NULL OR NEW.ID_MASTER_MEMBERSHIP = '' THEN
    SET NEW.ID_MASTER_MEMBERSHIP = CONCAT('MMB', LPAD(HEX(FLOOR(RAND()*0xFFFFFF)), 7, '0'));
  END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `MSTR_BARANG`
--

CREATE TABLE `MSTR_BARANG` (
  `KODE_BARANG` varchar(10) NOT NULL,
  `NAMA_BARANG` varchar(200) NOT NULL,
  `HARGA_BARANG` decimal(25,0) NOT NULL,
  `JUMLAH_BARANG` decimal(10,0) NOT NULL,
  `STATUS` decimal(1,0) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;

--
-- Triggers `MSTR_BARANG`
--
DELIMITER $$
CREATE TRIGGER `trg_before_insert_barang` BEFORE INSERT ON `MSTR_BARANG` FOR EACH ROW BEGIN
  IF NEW.KODE_BARANG IS NULL OR NEW.KODE_BARANG = '' THEN
    SET NEW.KODE_BARANG = CONCAT('BRG', LPAD(HEX(FLOOR(RAND()*16777215)), 7, '0'));
  END IF;
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `trg_brg_before_insert` BEFORE INSERT ON `MSTR_BARANG` FOR EACH ROW BEGIN
  IF NEW.KODE_BARANG IS NULL OR NEW.KODE_BARANG = '' THEN
    SET NEW.KODE_BARANG = CONCAT('BRG', LPAD(HEX(FLOOR(RAND()*0xFFFFFF)), 7, '0'));
  END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `MSTR_METODE_PEMBAYARAN`
--

CREATE TABLE `MSTR_METODE_PEMBAYARAN` (
  `ID_MPEM` varchar(10) NOT NULL,
  `NAMA_MPEM` varchar(100) NOT NULL,
  `STATUS` decimal(1,0) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;

--
-- Dumping data for table `MSTR_METODE_PEMBAYARAN`
--

INSERT INTO `MSTR_METODE_PEMBAYARAN` (`ID_MPEM`, `NAMA_MPEM`, `STATUS`) VALUES
('MPM6d50526', 'Cash', 1),
('MPM6d505a4', 'Transfer Bank', 1),
('MPM6d505cd', 'Kredit/Piutang', 1);

--
-- Triggers `MSTR_METODE_PEMBAYARAN`
--
DELIMITER $$
CREATE TRIGGER `trg_before_insert_mpembayaran` BEFORE INSERT ON `MSTR_METODE_PEMBAYARAN` FOR EACH ROW BEGIN
  IF NEW.ID_MPEM IS NULL OR NEW.ID_MPEM = '' THEN
    SET NEW.ID_MPEM = CONCAT('MPM', LPAD(HEX(FLOOR(RAND()*16777215)), 7, '0'));
  END IF;
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `trg_mpem_before_insert` BEFORE INSERT ON `MSTR_METODE_PEMBAYARAN` FOR EACH ROW BEGIN
  IF NEW.ID_MPEM IS NULL OR NEW.ID_MPEM = '' THEN
    SET NEW.ID_MPEM = CONCAT('MPM', LPAD(CONV(FLOOR(RAND()*999999), 10, 16), 7, '0'));
  END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `NOTA_JUAL`
--

CREATE TABLE `NOTA_JUAL` (
  `NOMOR_NOTA` varchar(10) NOT NULL,
  `NIK_CUSTOMER` varchar(10) NOT NULL,
  `NIK_KARYAWAN` varchar(10) NOT NULL,
  `ID_MPEM` varchar(10) NOT NULL,
  `STATUS` tinyint(1) NOT NULL DEFAULT 1
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;

--
-- Triggers `NOTA_JUAL`
--
DELIMITER $$
CREATE TRIGGER `trg_before_insert_nota_jual` BEFORE INSERT ON `NOTA_JUAL` FOR EACH ROW BEGIN
  IF NEW.NOMOR_NOTA IS NULL OR NEW.NOMOR_NOTA = '' THEN
    SET NEW.NOMOR_NOTA = CONCAT('NOT', LPAD(HEX(FLOOR(RAND()*16777215)), 7, '0'));
  END IF;
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `trg_not_before_insert` BEFORE INSERT ON `NOTA_JUAL` FOR EACH ROW BEGIN
  IF NEW.NOMOR_NOTA IS NULL OR NEW.NOMOR_NOTA = '' THEN
    SET NEW.NOMOR_NOTA = CONCAT('NOT', LPAD(HEX(FLOOR(RAND()*0xFFFFFF)), 7, '0'));
  END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `PIUTANG_CUSTOMER`
--

CREATE TABLE `PIUTANG_CUSTOMER` (
  `ID_PIUTANG_CUSTOMER` varchar(10) NOT NULL,
  `NOMOR_NOTA` varchar(10) NOT NULL,
  `JUMLAH_PIUTANG` decimal(25,0) NOT NULL,
  `STATUS` tinyint(1) NOT NULL DEFAULT 1
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;

--
-- Triggers `PIUTANG_CUSTOMER`
--
DELIMITER $$
CREATE TRIGGER `trg_before_insert_piutang` BEFORE INSERT ON `PIUTANG_CUSTOMER` FOR EACH ROW BEGIN
  IF NEW.ID_PIUTANG_CUSTOMER IS NULL OR NEW.ID_PIUTANG_CUSTOMER = '' THEN
    SET NEW.ID_PIUTANG_CUSTOMER = CONCAT('PIU', LPAD(HEX(FLOOR(RAND()*16777215)), 7, '0'));
  END IF;
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `trg_piu_before_insert` BEFORE INSERT ON `PIUTANG_CUSTOMER` FOR EACH ROW BEGIN
  IF NEW.ID_PIUTANG_CUSTOMER IS NULL OR NEW.ID_PIUTANG_CUSTOMER = '' THEN
    SET NEW.ID_PIUTANG_CUSTOMER = CONCAT('PIU', LPAD(HEX(FLOOR(RAND()*0xFFFFFF)), 7, '0'));
  END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `TRANSAKSI_MEMBERSHIP`
--

CREATE TABLE `TRANSAKSI_MEMBERSHIP` (
  `ID_TRANSAKSI_MEMBERSHIP` varchar(10) NOT NULL,
  `ID_MASTER_MEMBERSHIP` varchar(10) NOT NULL,
  `NIK_CUSTOMER` varchar(10) NOT NULL,
  `NAMA_MEMBERSHIP` varchar(100) NOT NULL,
  `HARGA_MEMBERSHIP` decimal(25,0) NOT NULL,
  `POTONGAN` decimal(2,0) NOT NULL,
  `TIMESTAMP_HABIS` timestamp NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;

--
-- Triggers `TRANSAKSI_MEMBERSHIP`
--
DELIMITER $$
CREATE TRIGGER `trg_before_insert_trs_membership` BEFORE INSERT ON `TRANSAKSI_MEMBERSHIP` FOR EACH ROW BEGIN
  IF NEW.ID_TRANSAKSI_MEMBERSHIP IS NULL OR NEW.ID_TRANSAKSI_MEMBERSHIP = '' THEN
    SET NEW.ID_TRANSAKSI_MEMBERSHIP = CONCAT('TRM', LPAD(HEX(FLOOR(RAND()*16777215)), 7, '0'));
  END IF;
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `trg_tmb_before_insert` BEFORE INSERT ON `TRANSAKSI_MEMBERSHIP` FOR EACH ROW BEGIN
  IF NEW.ID_TRANSAKSI_MEMBERSHIP IS NULL OR NEW.ID_TRANSAKSI_MEMBERSHIP = '' THEN
    SET NEW.ID_TRANSAKSI_MEMBERSHIP = CONCAT('TMB', LPAD(HEX(FLOOR(RAND()*0xFFFFFF)), 7, '0'));
  END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `TRS_CICILAN_PIUTANG`
--

CREATE TABLE `TRS_CICILAN_PIUTANG` (
  `ID_CICILAN_PIUTANG` varchar(10) NOT NULL,
  `ID_PIUTANG_CUSTOMER` varchar(10) NOT NULL,
  `JUMLAH_BAYAR` decimal(25,0) NOT NULL,
  `WAKTU_CICIL` timestamp NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;

--
-- Triggers `TRS_CICILAN_PIUTANG`
--
DELIMITER $$
CREATE TRIGGER `trg_before_insert_cicilan` BEFORE INSERT ON `TRS_CICILAN_PIUTANG` FOR EACH ROW BEGIN
  IF NEW.ID_CICILAN_PIUTANG IS NULL OR NEW.ID_CICILAN_PIUTANG = '' THEN
    SET NEW.ID_CICILAN_PIUTANG = CONCAT('CIC', LPAD(HEX(FLOOR(RAND()*16777215)), 7, '0'));
  END IF;
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `trg_cic_before_insert` BEFORE INSERT ON `TRS_CICILAN_PIUTANG` FOR EACH ROW BEGIN
  IF NEW.ID_CICILAN_PIUTANG IS NULL OR NEW.ID_CICILAN_PIUTANG = '' THEN
    SET NEW.ID_CICILAN_PIUTANG = CONCAT('CIC', LPAD(HEX(FLOOR(RAND()*0xFFFFFF)), 7, '0'));
  END IF;
END
$$
DELIMITER ;

--
-- Indexes for dumped tables
--

--
-- Indexes for table `CUSTOMER`
--
ALTER TABLE `CUSTOMER`
  ADD PRIMARY KEY (`NIK_CUSTOMER`);

--
-- Indexes for table `DETAIL_NOTA_JUAL`
--
ALTER TABLE `DETAIL_NOTA_JUAL`
  ADD PRIMARY KEY (`ID_DETAIL_NOTA_JUAL`),
  ADD KEY `FK_DETAIL_BARANG` (`KODE_BARANG`),
  ADD KEY `FK_DETAIL_NOTA` (`NOMOR_NOTA`);

--
-- Indexes for table `JURNAL_DETAIL`
--
ALTER TABLE `JURNAL_DETAIL`
  ADD PRIMARY KEY (`ID_DETAIL`),
  ADD KEY `FK_JURNAL_DETAIL_HEADER` (`ID_JURNAL_UMUM`),
  ADD KEY `FK_JURNAL_DETAIL_AKUN` (`KODE_AKUN`);

--
-- Indexes for table `JURNAL_UMUM`
--
ALTER TABLE `JURNAL_UMUM`
  ADD PRIMARY KEY (`ID_JURNAL_UMUM`);

--
-- Indexes for table `KARYAWAN`
--
ALTER TABLE `KARYAWAN`
  ADD PRIMARY KEY (`NIK_KARYAWAN`);

--
-- Indexes for table `KODE_AKUN`
--
ALTER TABLE `KODE_AKUN`
  ADD PRIMARY KEY (`KODE_AKUN`);

--
-- Indexes for table `MASTER_MEMBERSHIP`
--
ALTER TABLE `MASTER_MEMBERSHIP`
  ADD PRIMARY KEY (`ID_MASTER_MEMBERSHIP`),
  ADD KEY `FK_MASTER_CUSTOMER` (`NIK_CUSTOMER`);

--
-- Indexes for table `MSTR_BARANG`
--
ALTER TABLE `MSTR_BARANG`
  ADD PRIMARY KEY (`KODE_BARANG`);

--
-- Indexes for table `MSTR_METODE_PEMBAYARAN`
--
ALTER TABLE `MSTR_METODE_PEMBAYARAN`
  ADD PRIMARY KEY (`ID_MPEM`);

--
-- Indexes for table `NOTA_JUAL`
--
ALTER TABLE `NOTA_JUAL`
  ADD PRIMARY KEY (`NOMOR_NOTA`),
  ADD KEY `FK_NOTA_CUSTOMER` (`NIK_CUSTOMER`),
  ADD KEY `FK_NOTA_KARYAWAN` (`NIK_KARYAWAN`),
  ADD KEY `FK_NOTA_PEMBAYARAN` (`ID_MPEM`);

--
-- Indexes for table `PIUTANG_CUSTOMER`
--
ALTER TABLE `PIUTANG_CUSTOMER`
  ADD PRIMARY KEY (`ID_PIUTANG_CUSTOMER`),
  ADD KEY `FK_PIUTANG_NOTA` (`NOMOR_NOTA`);

--
-- Indexes for table `TRANSAKSI_MEMBERSHIP`
--
ALTER TABLE `TRANSAKSI_MEMBERSHIP`
  ADD PRIMARY KEY (`ID_TRANSAKSI_MEMBERSHIP`),
  ADD KEY `FK_TRS_MASTER` (`ID_MASTER_MEMBERSHIP`),
  ADD KEY `FK_TRS_CUSTOMER` (`NIK_CUSTOMER`);

--
-- Indexes for table `TRS_CICILAN_PIUTANG`
--
ALTER TABLE `TRS_CICILAN_PIUTANG`
  ADD PRIMARY KEY (`ID_CICILAN_PIUTANG`),
  ADD KEY `FK_CICILAN_PIUTANG` (`ID_PIUTANG_CUSTOMER`);

--
-- Constraints for dumped tables
--

--
-- Constraints for table `DETAIL_NOTA_JUAL`
--
ALTER TABLE `DETAIL_NOTA_JUAL`
  ADD CONSTRAINT `FK_DETAIL_BARANG` FOREIGN KEY (`KODE_BARANG`) REFERENCES `MSTR_BARANG` (`KODE_BARANG`) ON DELETE NO ACTION ON UPDATE CASCADE,
  ADD CONSTRAINT `FK_DETAIL_NOTA` FOREIGN KEY (`NOMOR_NOTA`) REFERENCES `NOTA_JUAL` (`NOMOR_NOTA`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Constraints for table `JURNAL_DETAIL`
--
ALTER TABLE `JURNAL_DETAIL`
  ADD CONSTRAINT `FK_JURNAL_DETAIL_AKUN` FOREIGN KEY (`KODE_AKUN`) REFERENCES `KODE_AKUN` (`KODE_AKUN`) ON DELETE NO ACTION ON UPDATE CASCADE,
  ADD CONSTRAINT `FK_JURNAL_DETAIL_HEADER` FOREIGN KEY (`ID_JURNAL_UMUM`) REFERENCES `JURNAL_UMUM` (`ID_JURNAL_UMUM`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Constraints for table `MASTER_MEMBERSHIP`
--
ALTER TABLE `MASTER_MEMBERSHIP`
  ADD CONSTRAINT `FK_MASTER_CUSTOMER` FOREIGN KEY (`NIK_CUSTOMER`) REFERENCES `CUSTOMER` (`NIK_CUSTOMER`) ON DELETE NO ACTION ON UPDATE CASCADE;

--
-- Constraints for table `NOTA_JUAL`
--
ALTER TABLE `NOTA_JUAL`
  ADD CONSTRAINT `FK_NOTA_CUSTOMER` FOREIGN KEY (`NIK_CUSTOMER`) REFERENCES `CUSTOMER` (`NIK_CUSTOMER`) ON DELETE NO ACTION ON UPDATE CASCADE,
  ADD CONSTRAINT `FK_NOTA_KARYAWAN` FOREIGN KEY (`NIK_KARYAWAN`) REFERENCES `KARYAWAN` (`NIK_KARYAWAN`) ON DELETE NO ACTION ON UPDATE CASCADE,
  ADD CONSTRAINT `FK_NOTA_PEMBAYARAN` FOREIGN KEY (`ID_MPEM`) REFERENCES `MSTR_METODE_PEMBAYARAN` (`ID_MPEM`) ON DELETE NO ACTION ON UPDATE CASCADE;

--
-- Constraints for table `PIUTANG_CUSTOMER`
--
ALTER TABLE `PIUTANG_CUSTOMER`
  ADD CONSTRAINT `FK_PIUTANG_NOTA` FOREIGN KEY (`NOMOR_NOTA`) REFERENCES `NOTA_JUAL` (`NOMOR_NOTA`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Constraints for table `TRANSAKSI_MEMBERSHIP`
--
ALTER TABLE `TRANSAKSI_MEMBERSHIP`
  ADD CONSTRAINT `FK_TRS_CUSTOMER` FOREIGN KEY (`NIK_CUSTOMER`) REFERENCES `CUSTOMER` (`NIK_CUSTOMER`) ON DELETE NO ACTION ON UPDATE CASCADE,
  ADD CONSTRAINT `FK_TRS_MASTER` FOREIGN KEY (`ID_MASTER_MEMBERSHIP`) REFERENCES `MASTER_MEMBERSHIP` (`ID_MASTER_MEMBERSHIP`) ON DELETE NO ACTION ON UPDATE CASCADE;

--
-- Constraints for table `TRS_CICILAN_PIUTANG`
--
ALTER TABLE `TRS_CICILAN_PIUTANG`
  ADD CONSTRAINT `FK_CICILAN_PIUTANG` FOREIGN KEY (`ID_PIUTANG_CUSTOMER`) REFERENCES `PIUTANG_CUSTOMER` (`ID_PIUTANG_CUSTOMER`) ON DELETE CASCADE ON UPDATE CASCADE;
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
